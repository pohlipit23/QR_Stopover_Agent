{"version":3,"sources":["../../src/core/define-utility.ts","../../src/utilities/inject-dev-route.ts"],"sourcesContent":["import type { HookParameters } from \"astro\";\r\nimport type { Hooks } from \"./types.js\";\r\n\r\n/**\r\n * A utility to be used on an Astro hook.\r\n *\r\n * @see defineUtility\r\n */\r\nexport type HookUtility<\r\n\tTHook extends keyof Hooks,\r\n\tTArgs extends Array<any>,\r\n\tTReturn,\r\n> = (params: HookParameters<THook>, ...args: TArgs) => TReturn;\r\n\r\n/**\r\n * Allows defining a type-safe function requiring all the params of a given hook.\r\n * It uses currying to make TypeScript happy.\r\n *\r\n * @param {string} _hook\r\n *\r\n * @see https://astro-integration-kit.netlify.app/utilities/define-utility/\r\n *\r\n * @example\r\n * ```ts\r\n * const test = defineUtility(\"astro:config:setup\")((params, foo: boolean) => {\r\n *  return \"bar\";\r\n * });\r\n * ```\r\n */\r\nexport const defineUtility =\r\n\t<THook extends keyof Hooks>(_hook: THook) =>\r\n\t/**\r\n\t * The function itself\r\n\t * @param {Function} fn;\r\n\t */\r\n\t<TArgs extends Array<any>, T>(\r\n\t\tfn: HookUtility<THook, TArgs, T>,\r\n\t): HookUtility<THook, TArgs, T> =>\r\n\t\tfn;\r\n","import type { InjectedRoute } from \"astro\";\nimport { defineUtility } from \"../core/define-utility.js\";\n\n/**\n * Allows you to inject a route in development only\n *\n * @param {import(\"astro\").HookParameters<\"astro:config:setup\">} params\n * @param {object} options\n * @param {import(\"astro\").InjectedRoute} options.injectedRoute\n *\n * @example\n * ```ts\n * injectDevRoute(params, {\n * \t\tpattern: \"/foo\",\n * \t\tentrypoint: resolve(\"./pages/foo.astro\")\n * })\n * ```\n *\n * @see https://astro-integration-kit.netlify.app/utilities/inject-dev-route/\n */\nexport const injectDevRoute = defineUtility(\"astro:config:setup\")(\n\t({ command, injectRoute }, injectedRoute: InjectedRoute) => {\n\t\tif (command === \"dev\") {\n\t\t\tinjectRoute(injectedRoute);\n\t\t}\n\t},\n);\n"],"mappings":"AA6BO,IAAMA,EACgBC,GAM3BC,GAEAA,EClBK,IAAMC,EAAiBC,EAAc,oBAAoB,EAC/D,CAAC,CAAE,QAAAC,EAAS,YAAAC,CAAY,EAAGC,IAAiC,CACvDF,IAAY,OACfC,EAAYC,CAAa,CAE3B,CACD","names":["defineUtility","_hook","fn","injectDevRoute","defineUtility","command","injectRoute","injectedRoute"]}